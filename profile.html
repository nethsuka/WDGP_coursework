<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>General page</title>
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/profile.css">
    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* CSS for the quiz card */
        .quiz-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* background: #fff; */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-width: 400px;
            width: 100%;
            display: none;
            background-color: rgba(210, 242, 253, 0.76);
            /* Transparent white background */
            border-radius: 10px;
        }

        .quiz-card.active {
            display: block;
        }

        .question-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .question {
            font-size: 18px;
            margin-bottom: 10px;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            background-color: rgba(226, 245, 250, 0.76);
            /* Transparent white background */
            border-radius: 10px;
        }

        .btn-container {
            display: flex;
            justify-content: space-between;

        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .btn.edit {
            position: relative;
            margin: 0 auto;
            margin-left: 43%;
            /* Center the button horizontally */
        }

        @media only screen and (max-width: 768px) {
            .btn.edit {
                width: 40%;
                margin-top: 5px;
                margin-left: 30%;

                /* Make the button full width on smaller screens */
            }
        }

        .btn.back {
            background: #ccc;
            color: #333;

        }

        .btn.next {
            background: #007bff;
            color: #fff;
        }

        .progress-bar {
            position: relative;
            width: 100%;
            height: 20px;
            background: #eee;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: #007bff;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-size: 14px;
        }

        /* CSS for the profile details section */
        #profileDetails {
            margin-top: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
            background-color: rgba(255, 255, 255, 0.5);
            /* Transparent white background */
            border-radius: 10px;
            /* Add border radius for a rounded look */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            /* Add shadow for depth */
        }

        #profileDetails h2 {
            text-align: center;
            margin-bottom: 20px;

        }

        #profileDetails p {
            margin-bottom: 10px;
            font-size: 16px;
        }

        /* CSS for the profile output card */
        .profile-output {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            max-width: 800px;
            position: relative;
            right: 39%;
            margin-left: 40%;
            margin-right: auto;
            text-align: left;
            background-color: rgba(210, 242, 253, 0.76);
            /* Transparent white background */
            border-radius: 10px;
            /* Add border radius for a rounded look */

        }

        .profile-output h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        /* CSS for the live profile output */
        #liveProfile {
            margin-top: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        #liveProfile p {
            font-size: 16px;
        }

        /* Make the profile output card and live profile responsive */
        @media only screen and (max-width: 768px) {

            #profileDetails,
            .profile-output,
            #liveProfile {
                padding: 0 10px;
            }
        }

        /* CSS for the footer */
        footer {
            margin-top: 20px;
            text-align: center;
        }

        @media only screen and (max-width: 768px) {

            #profileDetails,
            .profile-output,
            #liveProfile {
                max-width: 100%;
                margin-left: 0;
                margin-right: 0;
                padding: 0 20px;
            }

            .profile-output {
                right: 0;
                left: 0;
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* CSS for the profile completion progress */
        .progress-container {
            text-align: center;
            margin-top: 20px;
        }

        .progress-container h3 {
            margin-bottom: 10px;
        }

        .progress-bar {
            position: relative;
            width: 100%;
            height: 20px;
            margin-top: 20px;
            background: #eee;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: #007bff;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-size: 14px;
        }

        /* CSS for the profile completion progress */
        #progress-bar-new {
            margin-top: 20px;
            text-align: center;
        }

        #progress-bar-new h3 {
            margin-bottom: 10px;
        }

        #progress-bar-new .progress-bar {
            position: relative;
            width: 100%;
            height: 20px;

            background: #eee;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        #progress-bar-new .progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: #007bff;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        #progress-bar-new .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <section>
        <!-- Header Section -->
        <input type="checkbox" id="check">

        <header>
            <h2><a href="home.html" class="logo"><img src="img/aqua-life-logo-white-transparent.png" alt="logo"
                        height="35"></a></h2>
            <div class="navbar">
                <a href="home.html" class="active">Home</a>
                <a href="gallery.html" class="active">Gallery</a>
                <a href="shop.html" class="active">Shop</a>
                <a href="profile.html" class="active">Profile</a>
                <a href="team.html" class="active">About Us</a>
            </div>
            <label for="check" id="head-label">
                <i class="fas fa-bars menu-btn"></i>
                <i class="fas fa-times close-btn"></i>
            </label>
        </header>

        <!-- Profile Header -->
        <div class="header-container">
            <h1>Profile</h1>
        </div>

        <!-- Quiz Card -->
        <div class="quiz-card" id="quizCard">
            <div class="question-container">
                <h2 class="question" id="stepLabel">Step 1 - Personal Information:</h2>
                <label id="questionLabel" for="inputField">First Name:</label>
                <input type="text" id="inputField" oninput="updateLiveProfile()">
            </div>
            <div class="btn-container">
                <button class="btn back" onclick="previousQuestion()">Back</button>
                <button class="btn next" onclick="nextQuestion()">Next</button>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
                <span class="progress-text" id="progressText">0% Complete</span>
            </div>
        </div>

        <!-- Profile Details Section -->
        <div id="profileDetails" style="display:none">
            <h2>Your Profile Details:</h2>
            <div id="profileInfo"></div>
        </div>

        <!-- Profile Output Card -->
        <div class="profile-output" id="profileOutput" style="display:inline-block">
            <h2>Your Profile:</h2>
            <div id="liveProfile"></div>
        </div>

        <!-- Edit Button -->
        <div id="editButton">
            <button class="btn edit" onclick="editProfile()">Edit Information</button>
        </div>

        <!-- Profile Completion Progress Section -->
        <div class="progress-container" id="progress-bar-new">
            <h3>Profile Completion Progress</h3>
            <div class="progress-bar">
                <div class="progress" id="profileProgress"></div>
                <span class="progress-text" id="profileProgressText">0% Complete</span>
            </div>
        </div>
    </section>

    <!-- Footer Section -->
    <footer>
        <div class="waves">
            <div class="wave" id="wave1"></div>
            <div class="wave" id="wave2"></div>
            <div class="wave" id="wave3"></div>
            <div class="wave" id="wave4"></div>

            <button class="editor-btn" onclick="window.open('student1.html', '_blank')">Page Editor</button>

        </div>
        <div class="social">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
        </div>

        <ul class="menu">
            <li><a href="home.html">Home</a></li>
            <li><a href="gallery.html">Gallery</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="profile.html">Profile</a></li>
            <li><a href="team.html">About Us</a></li>
        </ul>
    </footer>

    <script>
        let currentQuestion = 0;
        let userResponses = []; // To store user's responses
        const questions = [
            // Stage 1: Personal Information
            "First name:",
            "Last name:",
            "Age:",
            "Gender:",
            "Address:",
            // Stage 2: Qualifications
            "School:",
            "Highest degree:",
            "University/Institution:",
            "Completion year:",
            // Stage 3: Availability and contact info
            "Availability for volunteering:",
            "Prefered field for volunteering:",
            "Mobile:",
            "Email:",
        ];
        document.getElementById('editButton').style.display = 'none'; // Show edit button
        document.getElementById('progress-bar-new').style.display = 'none'; // Show edit button


        function nextQuestion() {
            const inputValue = document.getElementById('inputField').value.trim(); // Get the input value

            // Store user's response
            userResponses[currentQuestion] = inputValue;

            currentQuestion++;
            if (currentQuestion < questions.length) {
                // Update question text
                document.querySelector('.question').textContent = `Step ${Math.ceil((currentQuestion + 1) / 5)} - ${currentQuestion < 5 ? 'Personal Information' : (currentQuestion < 9 ? 'Qualifications' : 'Availability and contact info')}`;
                document.getElementById('questionLabel').textContent = questions[currentQuestion]; // Update question label
                document.getElementById('inputField').value = userResponses[currentQuestion] || ''; // Set input value to previous response if available

                updateProgress();
                updateProfileProgress(); // Update profile completion progress
            } else {
                // Handle completion
                document.getElementById('quizCard').style.display = 'none'; // Hide quiz card
                document.getElementById('profileDetails').style.display = 'block'; // Show profile details section
                document.getElementById('profileOutput').style.display = 'none'; // Show profile output card
                document.getElementById('editButton').style.display = 'block'; // Show edit button
                document.getElementById('progress-bar-new').style.display = 'block'; // Show edit button

                // Display user's responses in profile output
                displayProfileOutput();

                alert('Thank you for submitting your information!');
            }
        }


        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                document.querySelector('.question').textContent = `Step ${Math.ceil((currentQuestion + 1) / 5)} - ${currentQuestion < 5 ? 'Personal Information' : (currentQuestion < 9 ? 'Qualifications' : 'Availability and contact info')}`;
                document.getElementById('questionLabel').textContent = questions[currentQuestion]; // Update question label
                document.getElementById('inputField').value = userResponses[currentQuestion] || ''; // Set input value to previous response if available
                updateProgress();
                updateProfileProgress(); // Update profile completion progress
            }
        }

        function updateProgress() {
            const filledFields = userResponses.filter(response => response !== '').length;
            const percentage = Math.round((filledFields / questions.length) * 100);
            document.getElementById('progress').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${percentage}% Complete`;
        }

        function updateProfileProgress() {
            const filledFields = userResponses.filter(response => response !== '').length;
            const percentage = Math.round((filledFields / questions.length) * 100);
            document.getElementById('profileProgress').style.width = percentage + '%';
            document.getElementById('profileProgressText').textContent = `${percentage}% Complete`;
        }

        function updateLiveProfile() {
            const inputValue = document.getElementById('inputField').value.trim(); // Get the input value
            const liveProfile = document.getElementById('liveProfile');
            liveProfile.innerHTML = ''; // Clear previous live output
            for (let i = 0; i < currentQuestion; i++) {
                liveProfile.innerHTML += `<p>${questions[i]} ${userResponses[i] || 'not entered'}</p>`;
            }
            if (inputValue !== '') {
                liveProfile.innerHTML += `<p>${questions[currentQuestion]} ${inputValue}</p>`; // Display current question's input value
            }
        }

        function displayProfileOutput() {
            const profileInfo = document.getElementById('profileInfo');
            profileInfo.innerHTML = ''; // Clear previous profile output
            for (let i = 0; i < questions.length; i++) {
                profileInfo.innerHTML += `<p>${questions[i]} ${userResponses[i] || 'not entered'}</p>`;
                if (i === 4) {
                    profileInfo.innerHTML += '<hr>'; // Add horizontal line after Address
                }
                if (i === 8) {
                    profileInfo.innerHTML += '<hr>'; // Add horizontal line after Task 4
                }
            }

            const liveProfile = document.getElementById('liveProfile');
            liveProfile.innerHTML = ''; // Clear previous live output
            for (let i = 0; i < questions.length; i++) {
                liveProfile.innerHTML += `<p>${questions[i]} ${userResponses[i] || 'not entered'}</p>`;
                if (i === 4) {
                    liveProfile.innerHTML += '<hr>'; // Add horizontal line after Address
                }
                if (i === 8) {
                    liveProfile.innerHTML += '<hr>'; // Add horizontal line after Task 4
                }
            }
        }

        function editProfile() {
            const allQuestionsAnswered = userResponses.every(response => response !== ''); // Check if all questions are answered

            document.getElementById('profileDetails').style.display = 'none'; // Hide profile details section
            document.getElementById('quizCard').style.display = 'block'; // Show quiz card
            document.getElementById('editButton').style.display = allQuestionsAnswered ? 'block' : 'none'; // Show or hide edit button based on whether all questions are answered
            document.getElementById('profileOutput').style.display = 'block'; // Show profile output card
            document.getElementById('progress-bar-new').style.display = 'none';
            currentQuestion = 12; // Reset current question index
            updateProgress(); // Update progress bar
            updateProfileProgress(); // Update profile completion progress

        }

        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById('quizCard').style.display = 'block'; // Make the quiz card visible
            updateProgress(); // Update progress bar initially
            updateProfileProgress(); // Update profile completion progress initially
        });
    </script>
</body>

</html>